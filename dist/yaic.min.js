!function(t){var a=t.yaic=function(t,e){e.x=e.x||0,e.y=e.y||0;var i=n(t,e,a.getTranslation(t),a.getScaling(t));return r(t,i.translation,i.scaling,a.getRotation(t),i.width,i.height)};a.getTranslation=function(t){return{x:parseFloat(t.style.left||0),y:parseFloat(t.style.top||0)}},a.getScaling=function(t){return((t.style.transform||"").match(/scale\((.+?)\)/)||[])[1]||1},a.getRotation=function(t){return((t.style.transform||"").match(/rotate\((.+?)deg\)/)||[])[1]||0};var n=function(t,a,n,r){var e=t.width/t.naturalWidth,i=1,h=1,l=a.width/a.height,u={x:(t.naturalWidth*e-t.naturalWidth)/2,y:(t.naturalHeight*e-t.naturalHeight)/2},g={width:a.targetWidth,height:a.targetHeight};a.targetWidth?(i=a.width/a.targetWidth,h=r*e/i):(i=r*e,g.width=a.width/i,g.height=a.width/i/l);var o={x:(t.naturalWidth/i-t.naturalWidth)/2,y:(t.naturalHeight/i-t.naturalHeight)/2},d={x:(n.x-a.x+u.x+o.x*i)/i,y:(n.y-a.y+u.y+o.y*i)/i};return{translation:d,scaling:h,width:g.width,height:g.height}},r=function(t,a,n,r,e,i){var h=document.createElement("canvas");h.width=e,h.height=i;var l=h.getContext("2d");return l.save(),l.translate(t.naturalWidth/2,t.naturalHeight/2),l.translate(a.x,a.y),l.scale(n,n),l.rotate(r*Math.PI/180),l.translate(-t.naturalWidth/2,-t.naturalHeight/2),l.drawImage(t,0,0),l.restore(),h};t.jQuery&&(t.jQuery.fn.yaic=function(t){return this.map(function(){return a(this,t)})})}(window);